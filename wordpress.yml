mail:
  image: tvial/docker-mailserver
  hostname: test
  domainname: schmidigital.de
  # your FQDN will be 'mail.domain.com'
  #ports:
  #- "25:25"
  #- "143:143"
  #- "587:587"
  #- "993:993"
  volumes:
  #- ./spamassassin:/tmp/spamassassin/
  - ./postfix:/tmp/postfix/
web:
  image: schmidigital/docker-nginx-php-wordpress
  volumes:
    - "./config/nginx.conf:/data/conf/nginx/hosts.d/nginx.conf"
    - "./config/templates:/templates"
    - "./toolbox:/toolbox"
    - "./www:/data/www"
  links:
    - db
    - mail
  environment: 
    NGINX_GENERATE_DEFAULT_VHOST: "false"

    WORDPRESS_DB_HOST: db:3306
    WORDPRESS_DB_USER: "root"
    WORDPRESS_DB_PASSWORD: "wordpress"
    WORDPRESS_DB_NAME: "wordpress"

    SITE_TITLE: "Site Title"
    ADMIN_USER: "admin"
    ADMIN_PW: "admin"
    ADMIN_EMAIL: "admin@admin.de"

    SITE_REPO: "ssh://git@git.schmidigital.de:7999/some/repo.git"

    HOST_UID: "UID"
    HOST_GID: "GID"
    DOCKER_USERNAME: "www"
    DOCKER_GROUPNAME: "www"

    ENTRYPOINT: /config/bootstrap.sh
  command: "/toolbox/bootstrap"
db:
  image: mysql
  environment:
    MYSQL_ROOT_PASSWORD: "wordpress"
    MYSQL_DATABASE: "wordpress"
    MYSQL_USER: "wordpress"
    MYSQL_PASSWORD: "wordpress"
  volumes:
    - "./mysql:/var/lib/mysql"

